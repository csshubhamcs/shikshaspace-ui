# ============================================
# Application Info
# ============================================
spring.application.name=shikshaspace-ui
app.version=1.0.0

# ============================================
# Server Configuration
# ============================================
server.port=${SERVER_PORT:7500}
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json

# ? NEW: Enable HTTP/2 for better performance
server.http2.enabled=true

# ============================================
# Logging Configuration
# ============================================
logging.level.root=INFO
logging.level.com.shikshaspace=INFO
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=WARN
logging.level.org.springframework.security.web=WARN
logging.level.com.vaadin=INFO
logging.level.org.atmosphere=WARN
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# ============================================
# Vaadin Configuration
# ============================================
vaadin.productionMode=${VAADIN_PRODUCTION_MODE:true}
vaadin.allowed-packages=com.vaadin,org.vaadin,com.shikshaspace
spring.mustache.check-template-location=false

# ? NEW: Vaadin Performance Optimizations
vaadin.heartbeatInterval=300
vaadin.closeIdleSessions=true
vaadin.sendUrlsAsParameters=false

# ? NEW: PWA Configuration (Optional - enable if you add icons)
# vaadin.pwa.enable=true
# vaadin.pwa.offline-path=offline.html

# ============================================
# Security Configuration (OpenID Connect via OAuth2)
# ============================================
spring.security.oauth2.client.registration.keycloak.client-id=${KEYCLOAK_CLIENT_ID:shikshaspace-ui-client}
spring.security.oauth2.client.registration.keycloak.client-secret=${KEYCLOAK_CLIENT_SECRET:}
spring.security.oauth2.client.registration.keycloak.scope=openid,profile,email
spring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.keycloak.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}

spring.security.oauth2.client.provider.keycloak.issuer-uri=${KEYCLOAK_ISSUER_URI:https://keycloak.shubhamsinghrajput.com/realms/shikshaspace}
spring.security.oauth2.client.provider.keycloak.user-name-attribute=preferred_username

# ============================================
# User Service Configuration
# ============================================
user.service.url=${USER_SERVICE_URL:https://users.shubhamsinghrajput.com}
user.service.timeout=${USER_SERVICE_TIMEOUT:30000}

# ============================================
# Session Configuration
# ============================================
server.servlet.session.timeout=30m
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=${SESSION_COOKIE_SECURE:true}
server.servlet.session.cookie.same-site=strict

# ? NEW: Static Resource Caching (Better Performance)
spring.web.resources.cache.cachecontrol.max-age=31536000
spring.web.resources.cache.cachecontrol.cache-public=true
spring.web.resources.chain.strategy.content.enabled=true
spring.web.resources.chain.strategy.content.paths=/**

# ? NEW: Encoding Configuration
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true
spring.http.encoding.force=true